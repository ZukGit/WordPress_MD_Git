/*!
 * linkblanker - Open link in new tab.
 * @version v2.5.3
 * @link https://www.aozora-create.com/service/linkblanker
 * @license MIT
 */!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=90)}({15:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},31:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(32),a=(i=s)&&i.__esModule?i:{default:i};var r={},h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return o(e,null,[{key:"getParseUrlCache",value:function(e){var t=r[e];return!!t&&t.value}},{key:"setParseUrlCache",value:function(t,n){if(Object.keys(r).length>50){var i=e.objectValues(r);i.sort(function(e,t){return e.time<t.time?-1:e.time>t.time?1:0}),i.splice(0,Math.floor(25)).forEach(function(e){delete r[e.key]})}r[t]={key:t,value:n,time:new Date}}},{key:"parseUrl",value:function(t){var n=e.getParseUrlCache(t);if(n)return n;var i=a.default.parse(t);Object.keys(i).forEach(function(e){i[e]||(i[e]="")}),i.domain=i.host;var o=i.pathname.split("/").filter(function(e){return e&&""!==e}),s="";return o.length>=2&&(s=i.protocol+"//"+i.auth+(""!==i.auth?"@":"")+i.host+"/"+o.splice(0,o.length-1).join("/")),i.directory=s,i.url=i.href,e.setParseUrlCache(t,i),i}},{key:"objectValues",value:function(e){return e?Object.keys(e).map(function(t){return e[t]}):[]}},{key:"isArray",value:function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{key:"bindAll",value:function(e,t){var n={};return Object.keys(e).forEach(function(i){n[i]=e[i].bind(t)}),n}}]),e}();t.default=h},32:function(e,t,n){"use strict";var i=n(33),o=n(35);function s(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=y,t.resolve=function(e,t){return y(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?y(e,!1,!0).resolveObject(t):t},t.format=function(e){o.isString(e)&&(e=y(e));return e instanceof s?e.format():s.prototype.format.call(e)},t.Url=s;var a=/^([a-z0-9.+-]+:)/i,r=/:[0-9]*$/,h=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),u=["'"].concat(l),c=["%","/","?",";","#"].concat(u),d=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,v=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,p={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=n(36);function y(e,t,n){if(e&&o.isObject(e)&&e instanceof s)return e;var i=new s;return i.parse(e,t,n),i}s.prototype.parse=function(e,t,n){if(!o.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var s=e.indexOf("?"),r=-1!==s&&s<e.indexOf("#")?"?":"#",l=e.split(r);l[0]=l[0].replace(/\\/g,"/");var y=e=l.join(r);if(y=y.trim(),!n&&1===e.split("#").length){var k=h.exec(y);if(k)return this.path=y,this.href=y,this.pathname=k[1],k[2]?(this.search=k[2],this.query=t?b.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var w=a.exec(y);if(w){var E=(w=w[0]).toLowerCase();this.protocol=E,y=y.substr(w.length)}if(n||w||y.match(/^\/\/[^@\/]+@[^@\/]+/)){var T="//"===y.substr(0,2);!T||w&&m[w]||(y=y.substr(2),this.slashes=!0)}if(!m[w]&&(T||w&&!g[w])){for(var O,C,N=-1,A=0;A<d.length;A++){-1!==(j=y.indexOf(d[A]))&&(-1===N||j<N)&&(N=j)}-1!==(C=-1===N?y.lastIndexOf("@"):y.lastIndexOf("@",N))&&(O=y.slice(0,C),y=y.slice(C+1),this.auth=decodeURIComponent(O)),N=-1;for(A=0;A<c.length;A++){var j;-1!==(j=y.indexOf(c[A]))&&(-1===N||j<N)&&(N=j)}-1===N&&(N=y.length),this.host=y.slice(0,N),y=y.slice(N),this.parseHost(),this.hostname=this.hostname||"";var x="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!x)for(var M=this.hostname.split(/\./),R=(A=0,M.length);A<R;A++){var L=M[A];if(L&&!L.match(f)){for(var S="",I=0,P=L.length;I<P;I++)L.charCodeAt(I)>127?S+="x":S+=L[I];if(!S.match(f)){var _=M.slice(0,A),H=M.slice(A+1),F=L.match(v);F&&(_.push(F[1]),H.unshift(F[2])),H.length&&(y="/"+H.join(".")+y),this.hostname=_.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),x||(this.hostname=i.toASCII(this.hostname));var D=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+D,this.href+=this.host,x&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==y[0]&&(y="/"+y))}if(!p[E])for(A=0,R=u.length;A<R;A++){var B=u[A];if(-1!==y.indexOf(B)){var q=encodeURIComponent(B);q===B&&(q=escape(B)),y=y.split(B).join(q)}}var W=y.indexOf("#");-1!==W&&(this.hash=y.substr(W),y=y.slice(0,W));var V=y.indexOf("?");if(-1!==V?(this.search=y.substr(V),this.query=y.substr(V+1),t&&(this.query=b.parse(this.query)),y=y.slice(0,V)):t&&(this.search="",this.query={}),y&&(this.pathname=y),g[E]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){D=this.pathname||"";var G=this.search||"";this.path=D+G}return this.href=this.format(),this},s.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",i=this.hash||"",s=!1,a="";this.host?s=e+this.host:this.hostname&&(s=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&o.isObject(this.query)&&Object.keys(this.query).length&&(a=b.stringify(this.query));var r=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||g[t])&&!1!==s?(s="//"+(s||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):s||(s=""),i&&"#"!==i.charAt(0)&&(i="#"+i),r&&"?"!==r.charAt(0)&&(r="?"+r),t+s+(n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(r=r.replace("#","%23"))+i},s.prototype.resolve=function(e){return this.resolveObject(y(e,!1,!0)).format()},s.prototype.resolveObject=function(e){if(o.isString(e)){var t=new s;t.parse(e,!1,!0),e=t}for(var n=new s,i=Object.keys(this),a=0;a<i.length;a++){var r=i[a];n[r]=this[r]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var h=Object.keys(e),l=0;l<h.length;l++){var u=h[l];"protocol"!==u&&(n[u]=e[u])}return g[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!g[e.protocol]){for(var c=Object.keys(e),d=0;d<c.length;d++){var f=c[d];n[f]=e[f]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||m[e.protocol])n.pathname=e.pathname;else{for(var v=(e.pathname||"").split("/");v.length&&!(e.host=v.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==v[0]&&v.unshift(""),v.length<2&&v.unshift(""),n.pathname=v.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var p=n.pathname||"",b=n.search||"";n.path=p+b}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var y=n.pathname&&"/"===n.pathname.charAt(0),k=e.host||e.pathname&&"/"===e.pathname.charAt(0),w=k||y||n.host&&e.pathname,E=w,T=n.pathname&&n.pathname.split("/")||[],O=(v=e.pathname&&e.pathname.split("/")||[],n.protocol&&!g[n.protocol]);if(O&&(n.hostname="",n.port=null,n.host&&(""===T[0]?T[0]=n.host:T.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===v[0]?v[0]=e.host:v.unshift(e.host)),e.host=null),w=w&&(""===v[0]||""===T[0])),k)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,T=v;else if(v.length)T||(T=[]),T.pop(),T=T.concat(v),n.search=e.search,n.query=e.query;else if(!o.isNullOrUndefined(e.search)){if(O)n.hostname=n.host=T.shift(),(x=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=x.shift(),n.host=n.hostname=x.shift());return n.search=e.search,n.query=e.query,o.isNull(n.pathname)&&o.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!T.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var C=T.slice(-1)[0],N=(n.host||e.host||T.length>1)&&("."===C||".."===C)||""===C,A=0,j=T.length;j>=0;j--)"."===(C=T[j])?T.splice(j,1):".."===C?(T.splice(j,1),A++):A&&(T.splice(j,1),A--);if(!w&&!E)for(;A--;A)T.unshift("..");!w||""===T[0]||T[0]&&"/"===T[0].charAt(0)||T.unshift(""),N&&"/"!==T.join("/").substr(-1)&&T.push("");var x,M=""===T[0]||T[0]&&"/"===T[0].charAt(0);O&&(n.hostname=n.host=M?"":T.length?T.shift():"",(x=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=x.shift(),n.host=n.hostname=x.shift()));return(w=w||n.host&&T.length)&&!M&&T.unshift(""),T.length?n.pathname=T.join("/"):(n.pathname=null,n.path=null),o.isNull(n.pathname)&&o.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},s.prototype.parseHost=function(){var e=this.host,t=r.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},33:function(e,t,n){(function(e,i){var o;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(s){t&&t.nodeType,e&&e.nodeType;var a="object"==typeof i&&i;a.global!==a&&a.window!==a&&a.self;var r,h=2147483647,l=36,u=1,c=26,d=38,f=700,v=72,p=128,m="-",g=/^xn--/,b=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,k={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=l-u,E=Math.floor,T=String.fromCharCode;function O(e){throw new RangeError(k[e])}function C(e,t){for(var n=e.length,i=[];n--;)i[n]=t(e[n]);return i}function N(e,t){var n=e.split("@"),i="";return n.length>1&&(i=n[0]+"@",e=n[1]),i+C((e=e.replace(y,".")).split("."),t).join(".")}function A(e){for(var t,n,i=[],o=0,s=e.length;o<s;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<s?56320==(64512&(n=e.charCodeAt(o++)))?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),o--):i.push(t);return i}function j(e){return C(e,function(e){var t="";return e>65535&&(t+=T((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=T(e)}).join("")}function x(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function M(e,t,n){var i=0;for(e=n?E(e/f):e>>1,e+=E(e/t);e>w*c>>1;i+=l)e=E(e/w);return E(i+(w+1)*e/(e+d))}function R(e){var t,n,i,o,s,a,r,d,f,g,b,y=[],k=e.length,w=0,T=p,C=v;for((n=e.lastIndexOf(m))<0&&(n=0),i=0;i<n;++i)e.charCodeAt(i)>=128&&O("not-basic"),y.push(e.charCodeAt(i));for(o=n>0?n+1:0;o<k;){for(s=w,a=1,r=l;o>=k&&O("invalid-input"),((d=(b=e.charCodeAt(o++))-48<10?b-22:b-65<26?b-65:b-97<26?b-97:l)>=l||d>E((h-w)/a))&&O("overflow"),w+=d*a,!(d<(f=r<=C?u:r>=C+c?c:r-C));r+=l)a>E(h/(g=l-f))&&O("overflow"),a*=g;C=M(w-s,t=y.length+1,0==s),E(w/t)>h-T&&O("overflow"),T+=E(w/t),w%=t,y.splice(w++,0,T)}return j(y)}function L(e){var t,n,i,o,s,a,r,d,f,g,b,y,k,w,C,N=[];for(y=(e=A(e)).length,t=p,n=0,s=v,a=0;a<y;++a)(b=e[a])<128&&N.push(T(b));for(i=o=N.length,o&&N.push(m);i<y;){for(r=h,a=0;a<y;++a)(b=e[a])>=t&&b<r&&(r=b);for(r-t>E((h-n)/(k=i+1))&&O("overflow"),n+=(r-t)*k,t=r,a=0;a<y;++a)if((b=e[a])<t&&++n>h&&O("overflow"),b==t){for(d=n,f=l;!(d<(g=f<=s?u:f>=s+c?c:f-s));f+=l)C=d-g,w=l-g,N.push(T(x(g+C%w,0))),d=E(C/w);N.push(T(x(d,0))),s=M(n,k,i==o),n=0,++i}++n,++t}return N.join("")}r={version:"1.4.1",ucs2:{decode:A,encode:j},decode:R,encode:L,toASCII:function(e){return N(e,function(e){return b.test(e)?"xn--"+L(e):e})},toUnicode:function(e){return N(e,function(e){return g.test(e)?R(e.slice(4).toLowerCase()):e})}},void 0===(o=function(){return r}.call(t,n,t,e))||(e.exports=o)}()}).call(this,n(34)(e),n(15))},34:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},35:function(e,t,n){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},36:function(e,t,n){"use strict";t.decode=t.parse=n(37),t.encode=t.stringify=n(38)},37:function(e,t,n){"use strict";function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,s){t=t||"&",n=n||"=";var a={};if("string"!=typeof e||0===e.length)return a;var r=/\+/g;e=e.split(t);var h=1e3;s&&"number"==typeof s.maxKeys&&(h=s.maxKeys);var l=e.length;h>0&&l>h&&(l=h);for(var u=0;u<l;++u){var c,d,f,v,p=e[u].replace(r,"%20"),m=p.indexOf(n);m>=0?(c=p.substr(0,m),d=p.substr(m+1)):(c=p,d=""),f=decodeURIComponent(c),v=decodeURIComponent(d),i(a,f)?o(a[f])?a[f].push(v):a[f]=[a[f],v]:a[f]=v}return a};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},38:function(e,t,n){"use strict";var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,r){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?s(a(e),function(a){var r=encodeURIComponent(i(a))+n;return o(e[a])?s(e[a],function(e){return r+encodeURIComponent(i(e))}).join(t):r+encodeURIComponent(i(e[a]))}).join(t):r?encodeURIComponent(i(r))+n+encodeURIComponent(i(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function s(e,t){if(e.map)return e.map(t);for(var n=[],i=0;i<e.length;i++)n.push(t(e[i],i));return n}var a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},90:function(e,t,n){"use strict";var i,o=n(91),s=(i=o)&&i.__esModule?i:{default:i};window.LinkBlankerAgent=new s.default(window,chrome)},91:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=r(n(92)),a=r(n(31));function r(e){return e&&e.__esModule?e:{default:e}}var h=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.window=t,this.chrome=n,this.domContentLoaded=!1,this.parsed={},this.enabled=!1,this.multiClickClose=!1,this.isBackground=!1,this.isVisibleLinkState=!1,this.isLeftClick=!0,this.isMiddleClick=!1,this.isRightClick=!1,this.shortcutKeyToggleEnabled=!1,this.disabledSameDomain=!1,this.ports={},this.keys=[],this.anchorEventHandler={},this.windowEventHandler={},this.receiveEventHandler={},this.navigation=null,this.navigationTarget=null,this.mutationObserver=null,this.bindNodeTypes=[],this.navPrefix=null,this.navTargets=[],this.navStatuses=[],this.init()}return o(e,[{key:"init",value:function(){var e=this;this.navPrefix="linkblanker-status-",this.navTargets=["icon","text"],this.navStatuses=["enabled","disabled"],this.bindNodeTypes=[this.window.Node.DOCUMENT_NODE,this.window.Node.ELEMENT_NODE],this.anchorEventHandler=a.default.bindAll({click:this.onAnchorClick,contextmenu:this.onAnchorContextmenu,mousedown:this.onAnchorMousedown,mouseenter:this.onAnchorMouseenter,mousemove:this.onAnchorMousemove,mouseleave:this.onAnchorMouseleave},this),this.windowEventHandler=a.default.bindAll({click:this.onWindowClick,keydown:this.onWindowKeydown,keyup:this.onWindowKeyup},this),this.receiveEventHandler=a.default.bindAll({updateTabStatus:this.onUpdateTabStatus,norifyRemoveTabs:this.onNorifyRemoveTabs},this),this.chrome.extension.onMessage.addListener(function(t,n){"name"in t&&t.name in e.receiveEventHandler&&"function"==typeof e.receiveEventHandler[t.name]&&e.receiveEventHandler[t.name](t)}),this.portInitialize("openTab","undoRemoveTabs","removeTabs","toggleEnabled"),this.window.document.addEventListener("DOMContentLoaded",this.onCompleted.bind(this)),this.window.addEventListener("load",this.onCompleted.bind(this))}},{key:"onCompleted",value:function(e){this.domContentLoaded||(this.domContentLoaded=!0,this.setNavigation(),this.bindAllEvents())}},{key:"portInitialize",value:function(){for(var e=this,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];n.forEach(function(t){var n=e.chrome.extension.connect({name:t});delete e.ports[t],n.onDisconnect.addListener(function(){e.ports[t]=!1}),e.ports[t]=n})}},{key:"bindAllEvents",value:function(){var e=this;Object.keys(this.windowEventHandler).forEach(function(t){e.window.removeEventListener(t,e.windowEventHandler[t])}),this.bindAnchorEvents(this.window.document),this.mutationObserver&&this.mutationObserver.disconnect(),this.enabled&&(this.mutationObserver=new this.window.MutationObserver(function(t){t.forEach(function(t){e.bindAnchorEvents(Array.prototype.slice.call(t.removedNodes),{click:!1,mouseenter:!1,mouseleave:!1,mousemove:!1}),e.bindAnchorEvents(Array.prototype.slice.call(t.addedNodes))})}),this.mutationObserver.observe(this.window.document,{childList:!0,subtree:!0})),this.multiClickClose&&this.window.addEventListener("click",this.windowEventHandler.click),this.shortcutKeyToggleEnabled.length>0&&(this.window.addEventListener("keydown",this.windowEventHandler.keydown),this.window.addEventListener("keyup",this.windowEventHandler.keyup))}},{key:"bindAnchorEvents",value:function(e,t){var n=this;void 0===t&&(t={click:this.enabled,contextmenu:this.enabled,mousedown:this.enabled,mouseenter:this.enabled&&this.isVisibleLinkState,mouseleave:this.enabled&&this.isVisibleLinkState,mousemove:this.enabled&&this.isVisibleLinkState}),(a.default.isArray(e)?e:[e]).forEach(function(e){if(e&&n.bindNodeTypes.indexOf(e.nodeType)>-1&&e.nodeName)if("a"!==e.nodeName.toLowerCase())n.bindAnchorEvents(Array.prototype.slice.call(e.getElementsByTagName("a")),t);else{var i=!1;Object.keys(n.anchorEventHandler).forEach(function(o){e.removeEventListener(o,n.anchorEventHandler[o]),t[o]&&(e.addEventListener(o,n.anchorEventHandler[o]),i=!0)}),i?!e.dataset.lbOrigHref&&e.href&&""!==e.href&&(e.dataset.lbOrigHref=e.href):delete e.dataset.lbOrigHref}})}},{key:"isNeedOpenTabFromSystemStatus",value:function(){return this.enabled&&this.ports.openTab&&null===this.window.opener}},{key:"isNeedOpenTabFromUrl",value:function(e){if(e&&!e.match(/javascript:/i)){var t=a.default.parseUrl(e),n=t.domain===this.parsed.domain;return!(n&&""!==t.hash||this.disabledSameDomain&&n)}return!1}},{key:"isNeedOpenTabFromDOM",value:function(e){if(!e||e.onclick)return!1;var t=this.getUrlFromDOM(e);return t&&this.isNeedOpenTabFromUrl(this.absPath(t))}},{key:"isNeedOpenTabFromEvent",value:function(e){return!e||!(e.ctrlKey||e.metaKey||e.shiftKey||e.defaultPrevented)}},{key:"isNeedOpenTabFromClickEvent",value:function(e){return!!e&&(this.isNeedOpenTabFromButton(e)&&this.isNeedOpenTabFromEvent(e)&&this.isNeedOpenTabFromDOM(this.getParentsNode(e.target,"a")))}},{key:"isNeedOpenTabFromButton",value:function(e){return this.isLeftClick&&0===e.button&&"click"===e.type||this.isMiddleClick&&1===e.button&&"mousedown"===e.type||this.isRightClick&&2===e.button&&"contextmenu"===e.type}},{key:"isNeedNewTabSelect",value:function(e){return!this.isBackground||1===e.button&&this.isMiddleClick}},{key:"getUrlFromDOM",value:function(e){return e.dataset.lbOrigHref?e.dataset.lbOrigHref:e.href?e.href:""}},{key:"getUrlFromClickEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e&&e.target){var n=this.getParentsNode(e.target,"a");if(n){var i=this.getUrlFromDOM(n);return t?this.absPath(i):i}}return null}},{key:"setNavigation",value:function(){if(this.window.document.body){var e=this.window.document.getElementById("linkblanker-navigation");if(this.isVisibleLinkState){if(e)return;(e=this.window.document.createElement("div")).setAttribute("id","linkblanker-navigation");var t=this.window.document.createElement("div");t.setAttribute("id","linkblanker-navigation-balloon"),t.innerHTML='\n        <div id="linkblanker-status-icon">\n          <img id="linkblanker-status-icon-enabled" src="'+this.chrome.extension.getURL("/img/icon-enabled.svg")+'"/>\n          <img id="linkblanker-status-icon-disabled" src="'+this.chrome.extension.getURL("/img/icon-disabled.svg")+'"/>\n        </div>\n        <div id="linkblanker-status-text">\n          <span id="linkblanker-status-text-enabled">ON</span>\n          <span id="linkblanker-status-text-disabled">OFF</span>\n        </div>\n      ',e.appendChild(t),this.window.document.body.appendChild(e),this.navigation=t}else e&&this.window.document.body.removeChild(e)}}},{key:"openNewTab",value:function(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();var t={url:this.getUrlFromClickEvent(e),selected:this.isNeedNewTabSelect(e)};this.ports.openTab.postMessage(t)}},{key:"openNewTabIfNeeded",value:function(e){this.getParentsNode(e.target,"a")&&this.isNeedOpenTabFromSystemStatus()&&this.isNeedOpenTabFromClickEvent(e)&&(this.openNewTab(e),this.window.getSelection().collapse(this.window.document.body,0))}},{key:"onWindowClick",value:function(e){if(this.navigation&&(this.navigation.className="hide",this.navigation.style.display="none"),this.ports.removeTabs&&3===e.detail){var t=e.clientX>this.window.document.documentElement.clientWidth/2?"right":"left";this.ports.removeTabs.postMessage({align:t,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY}),this.window.getSelection().collapse(this.window.document.body,0)}}},{key:"onWindowKeydown",value:function(e){this.setNavigationState(e);var t=Number(e.keyCode);if(-1===this.keys.indexOf(t)&&this.keys.push(t),this.keys.length===this.shortcutKeyToggleEnabled.length){var n=!0;for(var i in this.keys)if(-1===this.shortcutKeyToggleEnabled.indexOf(this.keys[i])){n=!1;break}n&&(this.keys=[],this.ports.toggleEnabled&&this.ports.toggleEnabled.postMessage({}))}}},{key:"onWindowKeyup",value:function(e){this.setNavigationState(e),this.keys=[]}},{key:"onAnchorClick",value:function(e){this.navigation&&(this.navigation.className="hide",this.navigation.style.display="none"),this.openNewTabIfNeeded(e)}},{key:"onAnchorContextmenu",value:function(e){this.openNewTabIfNeeded(e)}},{key:"onAnchorMousedown",value:function(e){this.navigation&&(this.navigation.className="hide",this.navigation.style.display="none"),this.openNewTabIfNeeded(e)}},{key:"onAnchorMouseenter",value:function(e){var t=this.getParentsNode(e.target,"a");t&&(this.navigationTarget=t,this.setNavigationState(e)?(this.navigation.className="show",this.navigation.style.display="block"):(this.navigation.className="hide",this.navigation.style.display="none"))}},{key:"onAnchorMousemove",value:function(e){if("show"===this.navigation.className){var t=e.pageY-this.navigation.clientHeight-20,n=e.pageX+20;t<0&&(t=e.pageY+20),this.window.innerWidth<n+this.navigation.clientWidth&&(n=e.pageX-this.navigation.clientWidth-20),this.navigation.style.top=t+"px",this.navigation.style.left=n+"px"}}},{key:"onAnchorMouseleave",value:function(e){var t=this;this.navigationTarget=null,setTimeout(function(){null===t.navigationTarget&&(t.navigation.className="hide",setTimeout(function(){null===t.navigationTarget&&(t.navigation.style.display="none")},110))},20)}},{key:"setNavigationState",value:function(e){if(!this.window.document.body||!this.isVisibleLinkState)return!1;if(e&&e.target&&this.getParentsNode(e.target,"#linkblanker-notify"))return!1;var t=this.navigationTarget&&this.isNeedOpenTabFromSystemStatus()&&this.isNeedOpenTabFromEvent(e)&&this.isNeedOpenTabFromDOM(this.navigationTarget),n=!0,i=!1,o=void 0;try{for(var s,a=this.navTargets[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var r=s.value,h=!0,l=!1,u=void 0;try{for(var c,d=this.navStatuses[Symbol.iterator]();!(h=(c=d.next()).done);h=!0){var f=c.value;this.window.document.getElementById(""+this.navPrefix+r+"-"+f).style.display=t&&"enabled"===f||!t&&"disabled"===f?"block":"none"}}catch(e){l=!0,u=e}finally{try{!h&&d.return&&d.return()}finally{if(l)throw u}}}}catch(e){i=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return!0}},{key:"onUpdateTabStatus",value:function(e){"parsed"in e&&(this.parsed=e.parsed),"enabled"in e&&(this.enabled=Boolean(e.enabled)),"isBackground"in e&&(this.isBackground=Boolean(e.isBackground)),"multiClickClose"in e&&(this.multiClickClose=Boolean(e.multiClickClose)),"isVisibleLinkState"in e&&(this.isVisibleLinkState=Boolean(e.isVisibleLinkState)),"isLeftClick"in e&&(this.isLeftClick=Boolean(e.isLeftClick)),"isMiddleClick"in e&&(this.isMiddleClick=Boolean(e.isMiddleClick)),"isRightClick"in e&&(this.isRightClick=Boolean(e.isRightClick)),"shortcutKeyToggleEnabled"in e&&(this.shortcutKeyToggleEnabled=e.shortcutKeyToggleEnabled.split(",").filter(function(e){return""!==e}).map(function(e){return Number(e)})),"disabledSameDomain"in e&&(this.disabledSameDomain=Boolean(e.disabledSameDomain)),this.setNavigation(),this.bindAllEvents()}},{key:"onNorifyRemoveTabs",value:function(e){var t=this,n=this.window.document.getElementById("linkblanker-notify");n&&n.hide(0);var i=this.getCanvas(e);this.window.document.body.appendChild(i);var o=new s.default(i),a="left"===e.align?o.REMOVE.RIGHT_TO_LEFT:o.REMOVE.LEFT_TO_RIGHT;o.show(e.removeTabsLength),setTimeout(function(){o.removeAll(a,function(n){i.setAttribute("class","hide");var o=t.getNotify(e,n);t.window.document.body.appendChild(o),o.show(),setTimeout(function(){o&&o.hide&&o.hide()},1e4),setTimeout(function(){i.parentNode.removeChild(i)},210)})},this.getWait(e))}},{key:"getCanvas",value:function(e){var t=this.window.document.createElement("canvas"),n=this.getCloseActionMetaInfo(e),i=["top:"+n.top+"px","left:"+n.left+"px","width:"+n.width+"px","height:"+n.height+"px","border-radius:"+Math.floor(n.width/2)+"px"];return t.setAttribute("id","linkblanker-canvas"),t.setAttribute("class","show"),t.setAttribute("width",n.width),t.setAttribute("height",n.height),t.setAttribute("style",i.join(";")+";"),t}},{key:"getWait",value:function(e){var t=50*e.removeTabsLength;return t<300?t=300:t>500&&(t=500),t}},{key:"getCloseActionMetaInfo",value:function(e){var t=Math.floor(e.pageY)-Math.floor(150),n=Math.floor(e.pageX)-Math.floor(150),i=window.scrollY,o=window.scrollX,s=this.window.document.documentElement,a={top:i,right:o+s.clientWidth,bottom:i+s.clientHeight,left:o};return t<a.top?t=a.top:t+300>a.bottom&&(t=a.bottom-300),n<a.left?n=a.left:n+300>a.right&&(n=a.right-300),{width:300,height:300,top:t,left:n}}},{key:"getNotify",value:function(e){var t=this,n=this.window.document.createElement("div");return n.innerHTML='\n      <img class="linkblanker-icon" src="'+this.chrome.extension.getURL("img/icon-enabled.svg")+'" />\n      <p class="linkblanker-message">\n      '+this.chrome.i18n.getMessage("message_drop_tabs").replace("{REMOVE_TAB_ALIGN}","left"===e.align?this.chrome.i18n.getMessage("title_left"):this.chrome.i18n.getMessage("title_right")).replace("{REMOVE_TAB_LENGTH}",e.removeTabsLength)+'\n      </p>\n      <ul class="linkblanker-linkbox">\n        <li>\n          <a class="linkblanker-undo" href="#">\n            '+this.chrome.i18n.getMessage("undo")+'\n          </a>\n        </li>\n        <li>\n          <a class="linkblanker-notify-remove" href="#">\n            '+this.chrome.i18n.getMessage("notify_remove")+"\n          </a>\n        </li>\n      </ul>\n    ",n.setAttribute("id","linkblanker-notify"),n.show=function(){n.setAttribute("class","show")},n.hide=function(e,t){"object"===(void 0===e?"undefined":i(e))?(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()):t=e,n&&(n.getElementsByClassName("linkblanker-notify-remove")[0].removeEventListener("click",n.hide),n.setAttribute("class","hide"),setTimeout(function(){n&&n.parentNode&&n.parentNode.removeChild(n)},void 0===t?500:t))},n.undo=function(e){"object"===(void 0===e?"undefined":i(e))&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()),n.getElementsByClassName("linkblanker-undo")[0].removeEventListener("click",n.undo),n.hide(),t.ports.undoRemoveTabs&&t.ports.undoRemoveTabs.postMessage({})},n.getElementsByClassName("linkblanker-undo")[0].addEventListener("click",n.undo),n.getElementsByClassName("linkblanker-notify-remove")[0].addEventListener("click",n.hide),n}},{key:"absPath",value:function(e){var t=this.window.document.createElement("div");return t.innerHTML='<a href="'+e+'"/>',t.firstChild.href}},{key:"getParentsNode",value:function(e,t,n){if(!e||!t)return!1;var i=null,o=null;return t=t.trim(),/^#/.test(t)?(i=new RegExp("^"+t.slice(1)+"$"),o=(e.id||"").trim()):/^\./.test(t)?(i=new RegExp("(^|s)"+t.slice(1)+"($|s)"),o=(e.className||"").trim()):(n||(t=t.toLowerCase()),i=new RegExp("^"+t+"$"),o=e.nodeName.toLowerCase()),""!==o&&i.test(o)?e:!!e.parentNode&&this.getParentsNode(e.parentNode,t,!0)}}]),e}();t.default=h},92:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.PADDING=5,this.REMOVE={LEFT_TO_RIGHT:1,RIGHT_TO_LEFT:2},this.canvas=t,this.stage=null,this.width=0,this.height=0,this.tabWidth=0,this.tabHeight=0,this.removeTargetTabLength=0,this.removed=0,this.callbacks={onRemove:function(){}},this.init()}return i(e,[{key:"show",value:function(e){this.destroyAll(),this.add(e)}},{key:"removeAll",value:function(e,t){var n=this;e=e||this.REMOVE.LEFT_TO_RIGHT,this.callbacks.onRemove=t,this.removeTargetTabLength=this.stage.children.length,this.removed=0,this.stage.children.forEach(function(t,i){var o=n.REMOVE.LEFT_TO_RIGHT===e?i:n.stage.children.length-i;createjs.Tween.get(t).wait(100*o).set({regX:Math.floor(n.tabWidth/2),regY:Math.floor(n.tabHeight/2)}).to({alpha:0,rotation:n.getRandomRotation(),scaleX:0,scaleY:0,x:n.getRandomX(),y:n.getRandomY()},n.getRandomInt(500,1e3),createjs.Ease.cubicOut).call(n.onRemove.bind(n),[t])})}},{key:"init",value:function(){this.width=this.canvas.clientWidth-2*this.PADDING,this.height=this.canvas.clientHeight-2*this.PADDING,this.stage=new createjs.Stage(this.canvas),createjs.Ticker.setFPS(60),createjs.Ticker.addEventListener("tick",this.stage)}},{key:"getTabInstance",value:function(e,t){var n=new createjs.Container;n.shadow=new createjs.Shadow("#fff",0,0,2);var i=Math.floor(e/10),o=new createjs.Graphics;o.beginFill("#ffffff").drawRoundRectComplex(0,0,e,t,i,i,2,2).endFill();var s=new createjs.Shape(o);return n.addChild(s),n}},{key:"add",value:function(e){this.tabWidth=150-this.PADDING/2,this.tabHeight=50-this.PADDING/2;for(var t=Math.floor(this.width/2)-Math.floor(this.tabWidth/2)+this.PADDING,n=Math.floor(this.height/2)-Math.floor(this.tabHeight/2)+this.PADDING,i=e-1;i>=0;i--){var o=this.getTabInstance(this.tabWidth,this.tabHeight);o.x=t,o.y=n,this.stage.addChild(o)}}},{key:"onRemove",value:function(e){this.destroy(e),this.removed++,this.callbacks.onRemove&&this.removeTargetTabLength===this.removed&&this.callbacks.onRemove(this.removed)}},{key:"destroy",value:function(e){this.stage.removeChild(e)}},{key:"destroyAll",value:function(){var e=this;this.stage.children.forEach(function(t){e.destroy(t)})}},{key:"getRandomInt",value:function(e,t){return Math.floor(Math.random()*(t-e+1))+e}},{key:"getRandomRotation",value:function(){return this.getRandomInt(520,2160)}},{key:"getRandomX",value:function(){return this.getRandomInt(0,this.width)}},{key:"getRandomY",value:function(){return this.getRandomInt(0,this.height)}}]),e}();t.default=o}});